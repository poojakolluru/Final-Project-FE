<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Student Assignment Submission</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500&display=swap');
:root { --accent1:#4db6ac; --accent2:#81c784; }

body {
  font-family: 'Poppins', sans-serif;
  margin: 0;
  background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
  display: flex;
  height: 100vh;
  overflow-x: hidden;
}

/* Toggle Button */
.toggle-btn {
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 1000;
  background: linear-gradient(45deg, #ff6b9d, #c44569);
  color: white;
  border: none;
  border-radius: 50%;
  width: 50px;
  height: 50px;
  cursor: pointer;
  font-size: 1.5em;
}

/* Sidebar */
.sidebar {
  width: 280px;
  background: linear-gradient(180deg, #81c784 0%, #4db6ac 100%);
  padding: 20px 0;
  position: fixed;
  height: 100%;
  left: 0;
  top: 0;
  overflow-y: auto;
  transition: 0.4s;
  border-radius: 0 20px 20px 0;
}
.sidebar.collapsed { width: 70px; }

.sidebar h2 { text-align: center; color: #fff; margin-bottom: 25px; }

.nav-item { list-style: none; margin: 15px 0; }
.nav-link {
  display: flex; align-items: center;
  padding: 15px 20px;
  color: white; text-decoration: none;
  border-radius: 15px;
  margin: 0 10px;
}
.nav-link:hover { background: rgba(255,255,255,0.2); }
.nav-link i { margin-right: 15px; font-size: 1.5em; }
.sidebar.collapsed .nav-link span { display: none; }

.dropdown-menu {
  list-style: none;
  background: white;
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  transition: 0.4s;
  border-radius: 10px;
  margin-left: 20px;
}
.dropdown.open .dropdown-menu {
  max-height: 300px;
  opacity: 1;
}

/* Main Content */
.main-content {
  margin-left: 280px;
  padding: 80px 20px 20px;
  flex: 1;
}
.main-content.collapsed { margin-left: 70px; }

.container {
  background: white;
  padding: 22px;
  border-radius: 12px;
  max-width: 1100px;
  margin: auto;
  box-shadow: 0 6px 25px rgba(0,0,0,0.08);
}

.row { display:flex; gap:16px; flex-wrap:wrap; }
.col { flex:1 1 300px; }

label { font-weight:500; margin-bottom:6px; display:block; }

input, select {
  width:100%;
  padding:12px;
  border-radius:10px;
  border:1px solid #ccc;
  margin-bottom:16px;
}

.btn {
  padding:10px 16px;
  border-radius:8px;
  border:none;
  background: linear-gradient(135deg,var(--accent1),#388e3c);
  color:white;
  cursor:pointer;
}
.btn.secondary { background:#7e22ce; }

.card {
  border:1px solid #ddd;
  border-radius:12px;
  padding:16px;
  background:#fafafa;
}
</style>
</head>

<body>

<button class="toggle-btn" id="toggle-btn">‚ò∞</button>

<!-- ‚úÖ ORIGINAL SIDEBAR (UNCHANGED) -->
 <nav class="sidebar" id="sidebar">
        <div class="logo-container">
            <img src="images/logo4.png" alt="Logo" style="width:100%;height:168px;">
        </div>
        <h2>Dashboard</h2>
        <ul>
            <li class="nav-item">
                <a href="index.html" class="nav-link"><i>üè†</i><span>Home</span></a>
            </li>
            <li class="nav-item dropdown" id="analytics">
                <a href="#" class="nav-link dropdown-toggle"><i>üìä</i><span>Add Submission</span></a>
                <ul class="dropdown-menu">
                    <li><a href="addAssignment.html">Assignments</a></li>
                    <li><a href="#">ALMs</a></li>
                
                </ul>
            </li>
            
            <!-- <li class="nav-item">
                <a href="#" class="nav-link"><i>‚öôÔ∏è</i><span>Settings</span></a>
            </li> -->
        </ul>
    </nav>

<main class="main-content" id="main-content">
<div class="container">

<h1 style="text-align:center;color:var(--accent1)">Student Assignment Submission</h1>

<p id="successMsg" style="display:none;text-align:center;color:green;font-weight:500;">
  ‚úÖ Assignment submitted successfully
</p>

<button class="btn" id="toggleViewBtn" style="float:right;">Show Submissions</button>

<!-- FORM -->
<div id="formWrap">
  <div class="row">
    <div class="col">
      <label>Student ID</label>
      <input type="text" id="studentId">

      <label>Student Name</label>
      <input type="text" id="studentName">

      <label>Subject</label>
      <select id="subject">
        <option value="">-- Select --</option>
        <option>Java</option>
        <option>Python</option>
        <option>DBMS</option>
        <option>Computer Networks</option>
      </select>
    </div>

    <div class="col">
      <label>Assignment Title</label>
      <input type="text" id="assignmentTitle">

      <label>Upload Answer File</label>
      <input type="file" id="assignmentFile">

      <label>Comments</label>
      <input type="text" id="comments">

      <button class="btn" id="saveBtn">Submit Assignment</button>
      <button class="btn secondary" onclick="resetForm()">Reset</button>
    </div>
  </div>
</div>

<!-- CARDS -->
<div id="cardWrap" class="row" style="display:none;"></div>

</div>
</main>

<script>
toggleViewBtn.onclick=()=>{
  formWrap.style.display =
    formWrap.style.display==="none" ? "block" : "none";
  cardWrap.style.display =
    cardWrap.style.display==="none" ? "flex" : "none";
  toggleViewBtn.textContent =
    formWrap.style.display==="none" ? "Show Form" : "Show Submissions";
};

document.getElementById("saveBtn").onclick=async()=>{
  if(!studentId.value||!studentName.value||!subject.value||!assignmentTitle.value){
    alert("Fill all required fields"); return;
  }

  let entry={
    studentId:studentId.value,
    studentName:studentName.value,
    subject:subject.value,
    title:assignmentTitle.value,
    comments:comments.value
  };

  const f=assignmentFile.files[0];
  if(f){
    entry.fileName=f.name;
    entry.fileData=await new Promise(r=>{
      let fr=new FileReader();
      fr.onload=()=>r(fr.result);
      fr.readAsDataURL(f);
    });
  }

  let data=JSON.parse(localStorage.getItem("student_submissions"))||[];
  data.push(entry);
  localStorage.setItem("student_submissions",JSON.stringify(data));

  successMsg.style.display="block";
  formWrap.style.display="none";
  cardWrap.style.display="flex";
  renderCards();
};

function renderCards(){
  let data=JSON.parse(localStorage.getItem("student_submissions"))||[];
  cardWrap.innerHTML="";
  data.forEach((a,i)=>{
    cardWrap.innerHTML+=`
      <div class="col card">
        <h3>${a.title}</h3>
        <p><b>ID:</b> ${a.studentId}</p>
        <p><b>Name:</b> ${a.studentName}</p>
        <p><b>Subject:</b> ${a.subject}</p>
        <button class="btn" onclick="download(${i})">Download</button>
      </div>`;
  });
}

function resetForm(){
  studentId.value="";
  studentName.value="";
  subject.value="";
  assignmentTitle.value="";
  assignmentFile.value="";
  comments.value="";
}

function download(i){
  let d=JSON.parse(localStorage.getItem("student_submissions"));
  let a=d[i];
  let l=document.createElement("a");
  l.href=a.fileData;
  l.download=a.fileName;
  l.click();
}
</script>

</body>
</html>
